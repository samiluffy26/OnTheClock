---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "100% Secure door-to-door transportation and care." } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="icon" type="image/png" href="/logo.png" />
    
  </head>
  <body>
    <slot />
    <script>
      // Tabs functionality
      document.addEventListener('DOMContentLoaded', () => {
        const tabButtons = document.querySelectorAll('.tab-button');

        tabButtons.forEach(button => {
          button.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            const parentSection = this.closest('.target-audience, .fleet');
            
            const sectionButtons = parentSection.querySelectorAll('.tab-button');
            sectionButtons.forEach(btn => btn.classList.remove('active'));
            
            this.classList.add('active');
            
            const sectionTabContents = parentSection.querySelectorAll('.tab-content');
            sectionTabContents.forEach(content => content.classList.remove('active'));
            
            const targetContent = parentSection.querySelector('#' + targetTab + '-content');
            if (targetContent) {
              targetContent.classList.add('active');
            }
          });
        });

        // Smooth scroll
        const navLinks = document.querySelectorAll('a[href^="#"]');
        
        navLinks.forEach(link => {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
              targetElement.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          });
        });

        // Set minimum date
        const dateInput = document.getElementById('rideDate');
        if (dateInput) {
          const today = new Date();
          const year = today.getFullYear();
          let month = today.getMonth() + 1;
          let day = today.getDate();
          
          if (month < 10) month = '0' + month;
          if (day < 10) day = '0' + day;
          
          dateInput.setAttribute('min', year + '-' + month + '-' + day);
        }

        // Scroll animations
        const animateElements = document.querySelectorAll('.feature-card, .benefit-item, .vehicle-showcase');
        
        function isElementInViewport(el) {
          const rect = el.getBoundingClientRect();
          return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
          );
        }
        
        function checkAnimation() {
          animateElements.forEach(element => {
            if (isElementInViewport(element)) {
              element.style.opacity = '1';
              element.style.transform = 'translateY(0)';
            }
          });
        }
        
        animateElements.forEach(element => {
          element.style.opacity = '0';
          element.style.transform = 'translateY(30px)';
          element.style.transition = 'all 0.6s ease';
        });
        
        window.addEventListener('scroll', checkAnimation);
        checkAnimation();

        // Form input validation
        const formInputs = document.querySelectorAll('.fare-form input[type="text"], .fare-form input[type="date"], .fare-form input[type="time"]');
        
        formInputs.forEach(input => {
          input.addEventListener('blur', function() {
            if (this.value.trim() === '' && this.hasAttribute('required')) {
              this.style.borderColor = 'var(--primary-color)';
            } else {
              this.style.borderColor = 'var(--bg-gray)';
            }
          });
          
          input.addEventListener('focus', function() {
            this.style.borderColor = 'var(--primary-color)';
          });
        });
      });
    </script>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>